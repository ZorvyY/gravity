!function(t){var e={};function s(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(r,i,function(e){return t[e]}.bind(null,i));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=33)}({0:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t,e,s){return this instanceof r?void 0===t?(this.x=0,void(this.y=0)):s?(this.x=t*Math.cos(e),void(this.y=t*Math.sin(e))):(this.x=t,void(this.y=e)):new r(...arguments)}toPolar(){return{magnitude:Math.hypot(this.x,this.y),angle:Math.atan2(this.y,this.x)}}get magnitude(){return Math.hypot(this.x,this.y)}get angle(){return Math.atan2(this.y,this.x)}get degrees(){return this.angle/Math.PI*180}normalize(){return this.times(1/this.magnitude)}normalize_(){return this.x/=this.magnitude,this.y/=this.magnitude,this}plus(t){return new r(this.x+t.x,this.y+t.y)}plus_(t){return this.x+=t.x,this.y+=t.y,this}minus(t){return new r(this.x-t.x,this.y-t.y)}minus_(t){return this.x-=t.x,this.y-=t.y,this}times(t){return new r(this.x*t,this.y*t)}times_(t){return this.x*=t,this.y*=t,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}rotateAround(t,e){let{magnitude:s,angle:i}=this.minus(e).toPolar();return i+=t,new r(s,i,!0).plus(e)}rotate(t){Math.abs(t)>2*Math.PI&&console.log("Check to see if your rotations are in radians");let{magnitude:e,angle:s}=this.toPolar();return s+=t,new r(e,s,!0)}proj(t){let e=t.normalize();return e.times(this.dot(e))}equals(t){return this.x==t.x&&this.y==t.y}}e.Vector=r;e.default=function(t,e,s){return new r(t,e,s)}},1:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(0),i=s(5);e.default=class{constructor(t,e,s){this.position=t,this.velocity=e,this.acceleration=r.default(0,0),this.mass=s||50,this.id=i.v4()}get momentum(){return this.velocity.times(this.mass)}set momentum(t){this.velocity=t.times(1/this.mass)}computeRadius(){return(Math.log(Math.abs(this.mass))+2)/1.5}get radius(){return this._radius||(this._radius=this.computeRadius())}}},2:function(t,e){var s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(s){var r=new Uint8Array(16);t.exports=function(){return s(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},3:function(t,e){for(var s=[],r=0;r<256;++r)s[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,i=s;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},33:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(34),i=s(1),n=s(0),o=s(8);let a=new r.default,u=!1;function l(){if(!u)return;let t=performance.now(),e=a.step(1/60);postMessage(o.createMessage(o.MessageType.PHYSICS_STEP,e)),setTimeout(l,1e3/60-(performance.now()-t))}onmessage=t=>{let e=t.data;switch(e.type){case o.MessageType.PLAY:u||(u=!0,l());break;case o.MessageType.PAUSE:console.log("pause"),u=!1;break;case o.MessageType.NEW_PROJECTILE:!function(t){a.addProj(t)}(function({position:t,velocity:e,mass:s}){let r=new i.default(n.default(),n.default(),0);return Object.assign(r.position,t),Object.assign(r.velocity,e),r.mass=s,r}(e.payload));break;case o.MessageType.SET_ENGINE_RULES:if(!t.data.rules)throw Error("No such rules");a.setRules(t.data.rules);break;default:throw Error("Unhandled message to worker")}}},34:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(1),i=s(0);e.default=class{constructor(t={}){this.bigG=100,this.projs=[],this.rules=t}setRules(t){Object.assign(this.rules,t)}addProj(t){this.projs.push(t)}calcForce(t,e){let s=e.position.minus(t.position),r=s.magnitude;return s.normalize().times_((this.rules.bigG||this.bigG)*t.mass*e.mass/Math.pow(r,this.rules.inverseDegree||2))}integrateSemiImplicitEuler(t){this.projs.forEach((t,e,s)=>{let r=s.filter(e=>e.id!==t.id).map(e=>this.calcForce(t,e)).reduce((t,e)=>t.plus_(e),i.default(0,0));t.acceleration=r.times(1/t.mass)}),this.projs.forEach(e=>{e.velocity.plus_(e.acceleration.times(t))}),this.projs.forEach(e=>{e.position.plus_(e.velocity.times(t))})}step(t){return this.computeCollisions(),this.integrateSemiImplicitEuler(t),this.projs}collide(t,e){let s=+t.mass+ +e.mass,i=t.position.times(t.mass).plus(e.position.times(e.mass)).times(1/s),n=t.momentum.plus(e.momentum).times(1/s);return new r.default(i,n,s)}computeCollisions(){return this.projs=this.projs.reduce((t,e)=>{let s=t.findIndex(t=>e.position.minus(t.position).magnitude<e.radius+t.radius/2);return-1===s?(t.push(e),t):(t[s]=this.collide(t[s],e),t)},[])}}},5:function(t,e,s){var r=s(6),i=s(7),n=i;n.v1=r,n.v4=i,t.exports=n},6:function(t,e,s){var r,i,n=s(2),o=s(3),a=0,u=0;t.exports=function(t,e,s){var l=e&&s||0,c=e||[],h=(t=t||{}).node||r,d=void 0!==t.clockseq?t.clockseq:i;if(null==h||null==d){var p=n();null==h&&(h=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=i=16383&(p[6]<<8|p[7]))}var m=void 0!==t.msecs?t.msecs:(new Date).getTime(),f=void 0!==t.nsecs?t.nsecs:u+1,y=m-a+(f-u)/1e4;if(y<0&&void 0===t.clockseq&&(d=d+1&16383),(y<0||m>a)&&void 0===t.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=m,u=f,i=d;var g=(1e4*(268435455&(m+=122192928e5))+f)%4294967296;c[l++]=g>>>24&255,c[l++]=g>>>16&255,c[l++]=g>>>8&255,c[l++]=255&g;var v=m/4294967296*1e4&268435455;c[l++]=v>>>8&255,c[l++]=255&v,c[l++]=v>>>24&15|16,c[l++]=v>>>16&255,c[l++]=d>>>8|128,c[l++]=255&d;for(var _=0;_<6;++_)c[l+_]=h[_];return e||o(c)}},7:function(t,e,s){var r=s(2),i=s(3);t.exports=function(t,e,s){var n=e&&s||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var a=0;a<16;++a)e[n+a]=o[a];return e||i(o)}},8:function(t,e,s){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.PLAY=0]="PLAY",t[t.PAUSE=1]="PAUSE",t[t.NEW_PROJECTILE=2]="NEW_PROJECTILE",t[t.SET_ENGINE_RULES=3]="SET_ENGINE_RULES",t[t.PHYSICS_STEP=4]="PHYSICS_STEP"}(r||(r={})),e.MessageType=r,e.createMessage=function(t,e){return{type:t,payload:e||null}}}});
//# sourceMappingURL=worker.js.map