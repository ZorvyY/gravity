{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/Vec.ts","webpack:///./src/worker/Projectile.ts","webpack:///./node_modules/uuid/lib/rng-browser.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./src/Subject.ts","webpack:///./node_modules/uuid/index.js","webpack:///./node_modules/uuid/v1.js","webpack:///./node_modules/uuid/v4.js","webpack:///./src/worker/Message.ts","webpack:///./src/index.ts","webpack:///./src/OptionsManager.ts","webpack:///./node_modules/object-path/index.js","webpack:///./src/Input.ts","webpack:///./src/View.ts","webpack:///./node_modules/color-interpolate/index.js","webpack:///./node_modules/color-parse/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/color-name/index.js","webpack:///./node_modules/is-plain-obj/index.js","webpack:///./node_modules/defined/index.js","webpack:///./node_modules/color-space/hsl.js","webpack:///./node_modules/color-space/rgb.js","webpack:///./node_modules/lerp/index.js","webpack:///./node_modules/mumath/clamp.js","webpack:///./src/lib/fitToContainer.ts","webpack:///./src/Store.ts","webpack:///./node_modules/normalize.css/normalize.css?2493","webpack:///./node_modules/normalize.css/normalize.css","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./src/ProjectileFactory.ts","webpack:///./src/Simulator.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Vector","x","y","isPolar","this","undefined","Math","cos","sin","arguments","magnitude","hypot","angle","atan2","PI","times","v","scalar","a","point","minus","toPolar","plus","abs","console","log","vhat","normalize","dot","other","position","velocity","mass","acceleration","id","vec","_radius","computeRadius","getRandomValues","crypto","window","msCrypto","rnds8","Uint8Array","rnds","Array","random","byteToHex","toString","substr","buf","offset","bth","join","callbacks","fn","push","e","forEach","v1","v4","uuid","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","options","b","node","clockseq","seedBytes","msecs","Date","getTime","nsecs","dt","Error","tl","tmh","ii","MessageType","createMessage","type","payload","input","optionsManager","renderer","fg","document","querySelector","bg","insertBefore","bgx","getContext","fillStyle","fillRect","width","height","setup","itemsToRenderStore","projectiles","subscribe","items","render","renderingRulesStore","velocityVectors","forceVectors","paths","cameraOrigin","rules","setRules","state","projectileStore","data","propagate","projectileFactory","simulator","registerHandlers","assign","display","setMass","particles","playback","pause","play","inputArrow","cameraUpdate","newProjectile","addProjectile","init","inputFieldIds","optObjectPaths","OptionsManager","super","currentOptions","speed","path","self","event","target","Number","checked","objectPath","set","emit","addButtons","idx","getElementById","onchange","createEventListener","massControl","map","val","button","createElement","textContent","String","appendChild","addEventListener","massEl","AT_TARGET","BUBBLING_PHASE","CAPTURING_PHASE","NONE","bubbles","cancelBubble","cancelable","composed","currentTarget","defaultPrevented","eventPhase","isTrusted","returnValue","srcElement","timeStamp","deepPath","factory","toStr","obj","prop","isEmpty","isArray","length","getKey","intKey","parseInt","keys","reduce","proxy","hasShallowProperty","includeInheritedProps","getShallowProperty","doNotReplace","split","currentPath","currentValue","slice","has","j","ensureExists","insert","at","arr","splice","empty","isBoolean","isObject","apply","coalesce","defaultValue","len","nextObj","del","mod","withInheritedProps","Input","canvas","drawInput","getInputLine","cx","camera","delta","handleMouseDown","shiftKey","beginViewDrag","offsetX","offsetY","beginVectorDraw","startVec","moveHandle","upHandle","removeEventListener","end","start","drawProjectile","proj","strokeStyle","colorMap","log10","max","computeProjectileColor","beginPath","arc","fill","pos","vel","accel","drawArrow","interpolate","moveTo","lineTo","stroke","rotate","closePath","itemsToRender","clearRect","save","equals","translate","restore","projectile","parse","hsl","lerp","clamp","palette","space","values","rgb","alpha","mix","lIdx","floor","rIdx","ceil","lColor","rColor","result","round","names","defined","cstr","parts","test","size","base","exec","replace","trim","parseFloat","baseHues","match","toLowerCase","isNaN","red","R","g","green","G","blue","B","h","hue","H","saturation","S","lightness","L","brightness","opacity","global","ArrayBuffer","isView","orange","yellow","purple","Function","getPrototypeOf","min","channel","alias","t1","t2","t3","v0","parent","parentElement","clientWidth","clientHeight","Store","defaultState","content","transform","locals","useSourceMap","list","item","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","cssWithMappingToString","mediaQuery","alreadyImportedModules","memo","stylesInDom","isOldIE","all","atob","getTarget","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","addStyle","listToStyles","newStyles","part","css","media","insertStyleElement","style","insertInto","lastStyleElementInsertedAtTop","insertAt","nextSibling","firstChild","before","removeStyleElement","parentNode","removeChild","indexOf","createStyleElement","attrs","nonce","getNonce","addAttrs","el","setAttribute","update","remove","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","defaultMass","Simulator","worker","Worker","onmessage","onMessage","PHYSICS_STEP","postMessage","PLAY","paused","PAUSE","NEW_PROJECTILE"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","class Vector{\n  x: number;\n  y: number;\n  constructor(x?: number, y?: number, isPolar?: boolean) {\n    if (!(this instanceof Vector)) {\n      return new Vector(...arguments);\n    }\n    if (x === undefined) {\n      this.x = 0;\n      this.y = 0;\n      return;\n    }\n    if (isPolar) {\n      // x = magnitude, y = angle\n      this.x = x * Math.cos(y);\n      this.y = x * Math.sin(y);\n      return;\n    }\n    this.x = x;\n    this.y = y;\n  }\n\n  toPolar() {\n    return {\n      magnitude: Math.hypot(this.x, this.y),\n      angle: Math.atan2(this.y, this.x)\n    };\n  }\n\n  get magnitude() {\n    return Math.hypot(this.x, this.y);\n  }\n\n  get angle() {\n    return Math.atan2(this.y, this.x);\n  }\n  \n  get degrees() {\n    return this.angle / Math.PI * 180;\n  }\n\n  normalize() {\n    return this.times(1/this.magnitude);\n  }\n\n  normalize_() {\n    this.x /= this.magnitude;\n    this.y /= this.magnitude;\n    return this;\n  }\n\n  plus(v) {\n    return new Vector(\n      this.x + v.x,\n      this.y + v.y\n    );\n  }\n\n  \n  plus_(v) {\n    this.x += v.x;\n    this.y += v.y;\n    return this;\n  }\n\n  minus(v) {\n    return new Vector(\n      this.x - v.x,\n      this.y - v.y\n    );\n  }\n\n  minus_(v) {\n    this.x -= v.x;\n    this.y -= v.y;\n    return this;\n  }\n\n  times(scalar) {\n    return new Vector(\n      this.x * scalar,\n      this.y * scalar\n    );\n  }\n\n  times_(s) {\n    this.x *= s;\n    this.y *= s;\n    return this;\n  }\n\n  dot(v) {\n    return this.x * v.x + this.y * v.y;\n  }\n\n  cross(v) {\n    return this.x * v.y - this.y * v.x;\n  }\n\n  rotateAround(a, point) {\n    let {magnitude, angle} = this.minus(point).toPolar();\n    angle += a;\n    return (new Vector(magnitude, angle, true)).plus(point);\n  }\n\n  rotate(a) {\n    if (Math.abs(a) > 2 * Math.PI) console.log('Check to see if your rotations are in radians');\n    let {magnitude, angle} = this.toPolar();\n    angle += a;\n    return new Vector(magnitude, angle, true);\n  }\n\n  proj(v) {\n    let vhat = v.normalize();\n    return vhat.times(this.dot(vhat));\n  }\n\n  equals(other) {\n    return this.x == other.x && this.y == other.y;\n  }\n}\n\nlet Vec = function(x?, y?, isPolar?): Vector { return new Vector(x, y, isPolar); };\nexport default Vec;\n\nexport { Vector };","import Vec, { Vector } from '../lib/Vec';\nimport { v4 as uuid } from 'uuid';\n\n// import constants from '../Unused/Options'\n// // declare let require;\n// import * as interpolate from 'color-interpolate';\n// import { arrow } from '../View';\n\nclass Projectile {\n  mass: number;\n  position: Vector;\n  velocity: Vector;\n  acceleration: Vector;\n  id: string;\n  _radius: number;\n  constructor(position, velocity, mass?) {\n    this.position = position;\n    this.velocity = velocity;\n    this.acceleration = Vec(0,0);\n    this.mass = mass || 50;\n    this.id = uuid();\n  }\n\n  get momentum() : Vector {\n    return this.velocity.times(this.mass);\n  }\n\n  set momentum(vec: Vector) {\n    this.velocity = vec.times(1/this.mass)\n  }\n\n  /*\n  computeColor () {\n    let colormap = interpolate(['white', 'brown', 'orange', 'red']);\n    return colormap(Math.log10(Math.max(this.mass, 1))/4);\n  }\n  */\n\n  /*\n  updateAcceleration (projectiles: Projectile[]) {\n    return this.acceleration = projectiles\n      .filter(({ id }) => (id != this.id))\n      .map(proj => ({\n        displacement: this.position.minus(proj.position),\n        mass: proj.mass\n      }))\n      .map(({displacement, mass}) => Vec(\n        // Gmm/r^2 \n        constants.bigG*mass/(Math.pow(displacement.magnitude, constants.inverseDegree)),\n        displacement.angle,\n        true // Is polar\n      ))\n      .reduce((total, cur) => total.plus(cur), Vec())\n      //.times(1/this.mass)\n  }\n  */\n\n  /*\n  getForce(projectiles) {\n    return projectiles\n    .filter(({ id }) => (id != this.id))\n    .map(proj => ({\n      displacement: this.position.minus(proj.position),\n      mass: proj.mass\n    }))\n    .map(({displacement, mass}) => Vec(\n      // Gmm/r^2 \n      constants.bigG*mass*this.mass/(Math.pow(displacement.magnitude, constants.inverseDegree)),\n      displacement.angle,\n      true // Is polar\n    ))\n    .reduce((total, cur) => total.plus(cur), Vec())\n  }\n  */\n\n  //The new and improved updateVelocity & updatePosition\n  \n  // verletIntegrate(elapsedTime, projectiles) {\n  //   let a_0 = this.acceleration.plus(Vec(0,0));\n\n  //   // d = v1*t + 1/2at^2\n  //   let delta = this.velocity.times(elapsedTime).plus(a_0.times(0.5*elapsedTime*elapsedTime));\n  //   this.position = this.position.plus(delta);\n\n  //   this.updateAcceleration(projectiles);\n  //   let avgAcceleration = a_0.plus(this.acceleration).times(0.5);\n\n  //   // a = (v2 - v1) / t => v2 = v1 + at\n  //   this.velocity = this.velocity.plus(avgAcceleration.times(elapsedTime));\n\n  //   return this;\n  // }\n\n  // implicitEulerIntegrate(h, projectiles) {\n  //   this.updateAcceleration(projectiles);\n  //   this.velocity = this.velocity.plus(this.acceleration.times(h));\n  //   this.position = this.position.plus(this.velocity.times(h));\n  //   return this;\n  // }\n\n  // eulerIntegrate(h, projectiles) {\n  //   this.updateAcceleration(projectiles);\n  //   this.position = this.position.plus(this.velocity.times(h));\n  //   this.velocity = this.velocity.plus(this.acceleration.times(h));\n  //   return this;\n  // }\n\n  // midpointIntegrate(h, projectiles) {\n  //   this.position = this.position.plus(this.velocity.times(h/2));\n  //   this.velocity = this.velocity.plus(this.updateAcceleration(projectiles).times(h));\n  //   this.position = this.position.plus(this.velocity.times(h/2));\n  //   return this;\n  // }\n\n  // fourthOrderIntegrate(h, projectiles) {\n  //   // n = 2^(1/3)\n  //   const n = 1.2599210498948732;\n  //   const w_0 = 1/(2-n);\n  //   const w_1 = -n/(2-n);\n  //   this.midpointIntegrate(w_0*h, projectiles);\n  //   this.midpointIntegrate(w_1*h, projectiles);\n  //   this.midpointIntegrate(w_0*h, projectiles);\n  //   return this;\n  // }\n\n  // //static momentumIntegrate()\n\n\n  // static RK4Integrate(h: number, projectiles: Projectile[]) {\n\n  //   let v1 = projectiles.map(proj => proj.velocity);\n  //   let p1 = projectiles.map(proj => proj.position);\n  //   let a1 = projectiles.map(proj => proj.updateAcceleration(projectiles));\n\n  //   let v2 = v1.map((vel, i) => vel.plus(a1[i].times(h/2)));\n  //   let p2 = p1.map((pos, i) => pos.plus(v1[i].times(h/2)));\n  //   projectiles.forEach((proj, i) => {proj.position = p2[i]});\n  //   let a2 = projectiles.map(proj => proj.updateAcceleration(projectiles));\n\n  //   let v3 = v2.map((vel, i) => vel.plus(a2[i].times(h/2)));\n  //   let p3 = p2.map((pos, i) => pos.plus(v2[i].times(h/2)));\n  //   projectiles.forEach((proj, i) => {proj.position = p3[i]});\n  //   let a3 = projectiles.map(proj => proj.updateAcceleration(projectiles));\n\n  //   let v4 = v3.map((vel, i) => vel.plus(a3[i].times(h)));\n  //   let p4 = p3.map((pos, i) => pos.plus(v3[i].times(h)));\n  //   projectiles.forEach((proj, i) => {proj.position = p4[i]});\n  //   let a4 = projectiles.map(proj => proj.updateAcceleration(projectiles));\n\n  //   projectiles.forEach((proj, i) => {\n  //     proj.acceleration = a1[i].plus(a2[i].times(2)).plus(a3[i].times(2)).plus(a4[i]).times(1/6);\n  //     proj.velocity = v1[i].plus(v2[i].times(2)).plus(v3[i].times(2)).plus(v4[i]).times(1/6);\n  //     proj.position = proj.position.plus(proj.velocity.times(h));\n  //     proj.velocity = proj.velocity.plus(proj.acceleration.times(h));\n  //   });\n\n\n  //   return projectiles;\n\n  // }\n\n  computeRadius() {\n    return (Math.log(Math.abs(this.mass))+2)/1.5;\n  }\n\n  get radius() {\n    return this._radius || (this._radius = this.computeRadius());\n  }\n\n  \n  /*\n  static computeCollision(p1, p2) {\n    let mass = +p1.mass + +p2.mass;\n    let position = p1.position.times(p1.mass).plus(p2.position.times(p2.mass)).times(1/mass);\n    let velocity = p1.momentum.plus(p2.momentum).times(1/mass);\n    return new Projectile(position, velocity, mass);\n  }\n  */\n}\n\nexport default Projectile;\n\n/*\ndraw(cx: CanvasRenderingContext2D) {\n  cx.save();\n  //cx.translate(0.5, 0.5);\n\n\n\n  cx.fillStyle = cx.strokeStyle = this.computeColor();\n  cx.beginPath();\n  cx.arc(this.position.x, this.position.y, this.computeRadius(), 0, 2*Math.PI);\n  cx.fill();\n\n  if (constants.velocityArrow)\n    arrow(cx, this.position, this.position.plus(this.velocity));\n  if (constants.accelerationArrow)\n    arrow(cx, this.position, this.position.plus(this.acceleration));\n  cx.restore();\n}\n*/","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","export default abstract class Subject<T> {\n    private callbacks: Array<Function>;\n\n    protected constructor() {\n        this.callbacks = [];\n    }\n\n    public subscribe(...fn: Array<(data: T) => void>) {\n        this.callbacks.push(...fn);\n    }\n\n    protected emit(e: T) {\n        this.callbacks.forEach(fn => fn(e));\n    }\n}\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","import Projectile from \"./Projectile\";\n\nenum MessageType {\n    PLAY,\n    PAUSE,\n    NEW_PROJECTILE,\n    SET_ENGINE_RULES,\n    PHYSICS_STEP\n}\n\ninterface Message {\n    type: MessageType;\n    payload: object;\n}\n\nfunction createMessage(type: MessageType, payload?: object) {\n    return ({type, payload: payload || null});\n}\n\nexport {\n    Message, createMessage, MessageType\n}\n","'use strict';\n\nimport OptionsManager from './OptionsManager';\nimport Input, {InputEvent} from './Input';\nimport PathHistory from './Paths';\nimport optionsAuto, { Options } from './Unused/Options';\nimport Renderer, {ItemsToRender, RenderingRules} from './View';\nimport fitToContainer from './lib/fitToContainer';\nimport Store from './Store';\n\nimport 'normalize.css';\nimport * as Stats from 'stats-js';\nimport Vec, {Vector} from \"./lib/Vec\";\nimport ProjectileFactory from \"./ProjectileFactory\";\nimport Projectile from \"./worker/Projectile\";\nimport Simulator from \"./Simulator\";\n\nlet fg: HTMLCanvasElement = document.querySelector('#fg')\nlet bg: HTMLCanvasElement = document.querySelector('#bg');\n\ndocument.querySelector('#graphics').insertBefore(fg,bg);\n\nlet input: Input;\nlet stats: Stats;\nlet pathHistory;\nlet optionsManager: OptionsManager;\nlet renderer: Renderer;\n\nfunction setup() {\n  fitToContainer(fg)\n  fitToContainer(bg)\n\n  let bgx = bg.getContext('2d');\n  bgx.fillStyle = 'black';\n  bgx.fillRect(0, 0, bg.width, bg.height);\n}\n\nfunction init() {\n  // set up backwards: output, state, input\n  setup();\n  renderer = new Renderer(fg);\n\n  // TODO: Use filtering to set up functionalities like workflows\n\n  // Stores --> View\n  let itemsToRenderStore = new Store<ItemsToRender>({ projectiles: [] })\n  itemsToRenderStore.subscribe(items => {\n    renderer.render(items);\n  });\n\n  let renderingRulesStore = new Store<RenderingRules>({\n    velocityVectors: false,\n    forceVectors: false,\n    paths: false,\n    cameraOrigin: Vec(0, 0)\n  });\n  renderingRulesStore.subscribe(rules => {\n    renderer.setRules(rules);\n    renderer.render(itemsToRenderStore.state);\n  })\n\n  let projectileStore = new Store<Array<Projectile>>([]);\n  projectileStore.subscribe(data => {\n    itemsToRenderStore.state.projectiles = data;\n    itemsToRenderStore.propagate()\n  })\n\n  // Controllers --> Middleware --> Stores\n  let projectileFactory = new ProjectileFactory(50);\n  let simulator = new Simulator();\n  simulator.subscribe(data => {\n    projectileStore.state = data;\n    projectileStore.propagate();\n  })\n\n  optionsManager = new OptionsManager();\n  optionsManager.registerHandlers();\n  optionsManager.subscribe((options) => {\n    Object.assign(renderingRulesStore.state, options.display);\n    renderingRulesStore.propagate();\n    projectileFactory.setMass(options.particles.mass);\n    if (options.playback.pause) simulator.pause();\n    else simulator.play();\n  });\n\n  input = new Input(fg);\n  input.subscribe((data: InputEvent) => {\n    if (data.inputArrow) {\n      itemsToRenderStore.state.inputArrow = data.inputArrow;\n      itemsToRenderStore.propagate();\n    }\n    if (data.cameraUpdate) {\n      renderingRulesStore.state.cameraOrigin = data.cameraUpdate;\n      renderingRulesStore.propagate();\n    }\n    if (data.newProjectile) {\n      let newProjectile = projectileFactory.create(data.newProjectile);\n      simulator.addProjectile(newProjectile);\n      projectileStore.state.push(newProjectile);\n      projectileStore.propagate();\n      itemsToRenderStore.state.inputArrow = null;\n      itemsToRenderStore.propagate();\n    }\n  })\n\n}\n\n/*\nfunction initOld() {\n  let worker = new Worker('worker.js');\n  input = new Input(fg);\n\n\n\n  options = Options((newOptions) => {\n    worker.postMessage({\n      type: 'set-engine-rules',\n      rules: newOptions, //NOTE: CURRENTLY SENDING ENTIRE OPTIONS OBJECT\n    });\n  });\n\n  let bgx = bg.getContext('2d');\n  bgx.fillStyle = 'black';\n  bgx.fillRect(0, 0, bg.width, bg.height);\n\n  //pathHistory = new PathHistory();\n\n  function handleSimulationStep(e) {\n    //pathHistory.addStep(e.data.projectiles, options);\n    stats.begin();\n    requestAnimationFrame(() => {\n      stats.end();\n      \n      render(fg, {\n        projectiles: e.data.projectiles,\n        inputLine: input.getInputLine(),\n        history: pathHistory\n      }, Object.assign({}, options, {\n        transform: input.getTransform()\n      }));\n    });\n  }\n\n  worker.onmessage = e => {\n    switch (e.data.type) {\n      case 'simulation-step':\n        handleSimulationStep(e);\n        break;\n\n      default:\n        throw Error('Unhandled message type');\n        break;\n    }\n  };\n}\n */\n\n// (function () {\n//   stats = new Stats();\n//   stats.setMode(0);\n//\n//   stats.domElement.style.position = 'absolute';\n//   stats.domElement.style.left = '0px';\n//   stats.domElement.style.top = '0px';\n//\n//   document.body.appendChild(stats.domElement);\n// })();\n\ninit();\n","import Subject from \"./Subject\";\nimport * as objectPath from 'object-path';\n\ninterface Options {\n  particles: {\n    mass: number\n  };\n  playback: {\n    pause: boolean,\n    speed: number\n  };\n  display: {\n    forceVectors: boolean,\n    velocityVectors: boolean,\n    paths: boolean\n  };\n}\n\nconst inputFieldIds = ['mass', 'pause', 'speed', 'force', 'velocity', 'paths'];\nconst optObjectPaths = ['particles.mass', 'playback.pause',\n  'playback.speed', 'display.forceVectors', 'display.velocityVectors', 'display.paths'];\n\nexport default class OptionsManager extends Subject<Options> {\n  currentOptions: Options;\n\n  constructor() {\n    super();\n    this.currentOptions = {\n      particles: { mass: 50 },\n      playback: { pause: false, speed: 1 },\n      display: { forceVectors: false, velocityVectors: false, paths: false }\n    }\n  }\n\n  createEventListener(path) {\n    let self = this;\n    return function onchange(event: Event) {\n      let target = <HTMLInputElement>(event.target);\n      let value: number | boolean;\n      switch (target.type) {\n        case 'number': value = Number(target.value); break;\n        case 'checkbox': value = target.checked; break;\n      }\n      objectPath.set(self.currentOptions, path, value);\n      self.emit(self.currentOptions);\n    }\n  }\n\n  registerHandlers() {\n    this.addButtons()\n    inputFieldIds.forEach((id, idx) => {\n      let inputEl : HTMLInputElement = document.getElementById(id) as HTMLInputElement;\n\n      inputEl.onchange = this.createEventListener(optObjectPaths[idx]);\n    })\n  }\n\n  addButtons() {\n    let massControl = document.getElementById('mass-control');\n\n    function button(val: number) {\n      let button = document.createElement('button');\n      button.textContent = String(val);\n      massControl.appendChild(button);\n      button.addEventListener('click', () => {\n        let massEl = document.getElementById('mass') as HTMLInputElement;\n        massEl.value = String(val);\n        massEl.onchange({\n          AT_TARGET: 0,\n          BUBBLING_PHASE: 0,\n          CAPTURING_PHASE: 0,\n          NONE: 0,\n          bubbles: false,\n          cancelBubble: false,\n          cancelable: false,\n          composed: false,\n          currentTarget: undefined,\n          defaultPrevented: false,\n          eventPhase: 0,\n          isTrusted: false,\n          returnValue: false,\n          srcElement: undefined,\n          timeStamp: 0,\n          type: \"\",\n          deepPath(): EventTarget[] {\n            return [];\n          },\n          initEvent(type: string, bubbles?: boolean, cancelable?: boolean): void {\n          },\n          preventDefault(): void {\n          },\n          stopImmediatePropagation(): void {\n          },\n          stopPropagation(): void {\n          },\n          target: massEl\n        });\n      });\n    }\n    [1, 10, 100, 500, 1000, 2500, 5000, 10000].map(button);\n  }\n}\n\n","(function (root, factory){\n  'use strict';\n\n  /*istanbul ignore next:cant test*/\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else {\n    // Browser globals\n    root.objectPath = factory();\n  }\n})(this, function(){\n  'use strict';\n\n  var toStr = Object.prototype.toString;\n  function hasOwnProperty(obj, prop) {\n    if(obj == null) {\n      return false\n    }\n    //to handle objects with null prototypes (too edge case?)\n    return Object.prototype.hasOwnProperty.call(obj, prop)\n  }\n\n  function isEmpty(value){\n    if (!value) {\n      return true;\n    }\n    if (isArray(value) && value.length === 0) {\n        return true;\n    } else if (typeof value !== 'string') {\n        for (var i in value) {\n            if (hasOwnProperty(value, i)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n  }\n\n  function toString(type){\n    return toStr.call(type);\n  }\n\n  function isObject(obj){\n    return typeof obj === 'object' && toString(obj) === \"[object Object]\";\n  }\n\n  var isArray = Array.isArray || function(obj){\n    /*istanbul ignore next:cant test*/\n    return toStr.call(obj) === '[object Array]';\n  }\n\n  function isBoolean(obj){\n    return typeof obj === 'boolean' || toString(obj) === '[object Boolean]';\n  }\n\n  function getKey(key){\n    var intKey = parseInt(key);\n    if (intKey.toString() === key) {\n      return intKey;\n    }\n    return key;\n  }\n\n  function factory(options) {\n    options = options || {}\n\n    var objectPath = function(obj) {\n      return Object.keys(objectPath).reduce(function(proxy, prop) {\n        if(prop === 'create') {\n          return proxy;\n        }\n\n        /*istanbul ignore else*/\n        if (typeof objectPath[prop] === 'function') {\n          proxy[prop] = objectPath[prop].bind(objectPath, obj);\n        }\n\n        return proxy;\n      }, {});\n    };\n\n    function hasShallowProperty(obj, prop) {\n      return (options.includeInheritedProps || (typeof prop === 'number' && Array.isArray(obj)) || hasOwnProperty(obj, prop))\n    }\n\n    function getShallowProperty(obj, prop) {\n      if (hasShallowProperty(obj, prop)) {\n        return obj[prop];\n      }\n    }\n\n    function set(obj, path, value, doNotReplace){\n      if (typeof path === 'number') {\n        path = [path];\n      }\n      if (!path || path.length === 0) {\n        return obj;\n      }\n      if (typeof path === 'string') {\n        return set(obj, path.split('.').map(getKey), value, doNotReplace);\n      }\n      var currentPath = path[0];\n      var currentValue = getShallowProperty(obj, currentPath);\n      if (path.length === 1) {\n        if (currentValue === void 0 || !doNotReplace) {\n          obj[currentPath] = value;\n        }\n        return currentValue;\n      }\n\n      if (currentValue === void 0) {\n        //check if we assume an array\n        if(typeof path[1] === 'number') {\n          obj[currentPath] = [];\n        } else {\n          obj[currentPath] = {};\n        }\n      }\n\n      return set(obj[currentPath], path.slice(1), value, doNotReplace);\n    }\n\n    objectPath.has = function (obj, path) {\n      if (typeof path === 'number') {\n        path = [path];\n      } else if (typeof path === 'string') {\n        path = path.split('.');\n      }\n\n      if (!path || path.length === 0) {\n        return !!obj;\n      }\n\n      for (var i = 0; i < path.length; i++) {\n        var j = getKey(path[i]);\n\n        if((typeof j === 'number' && isArray(obj) && j < obj.length) ||\n          (options.includeInheritedProps ? (j in Object(obj)) : hasOwnProperty(obj, j))) {\n          obj = obj[j];\n        } else {\n          return false;\n        }\n      }\n\n      return true;\n    };\n\n    objectPath.ensureExists = function (obj, path, value){\n      return set(obj, path, value, true);\n    };\n\n    objectPath.set = function (obj, path, value, doNotReplace){\n      return set(obj, path, value, doNotReplace);\n    };\n\n    objectPath.insert = function (obj, path, value, at){\n      var arr = objectPath.get(obj, path);\n      at = ~~at;\n      if (!isArray(arr)) {\n        arr = [];\n        objectPath.set(obj, path, arr);\n      }\n      arr.splice(at, 0, value);\n    };\n\n    objectPath.empty = function(obj, path) {\n      if (isEmpty(path)) {\n        return void 0;\n      }\n      if (obj == null) {\n        return void 0;\n      }\n\n      var value, i;\n      if (!(value = objectPath.get(obj, path))) {\n        return void 0;\n      }\n\n      if (typeof value === 'string') {\n        return objectPath.set(obj, path, '');\n      } else if (isBoolean(value)) {\n        return objectPath.set(obj, path, false);\n      } else if (typeof value === 'number') {\n        return objectPath.set(obj, path, 0);\n      } else if (isArray(value)) {\n        value.length = 0;\n      } else if (isObject(value)) {\n        for (i in value) {\n          if (hasShallowProperty(value, i)) {\n            delete value[i];\n          }\n        }\n      } else {\n        return objectPath.set(obj, path, null);\n      }\n    };\n\n    objectPath.push = function (obj, path /*, values */){\n      var arr = objectPath.get(obj, path);\n      if (!isArray(arr)) {\n        arr = [];\n        objectPath.set(obj, path, arr);\n      }\n\n      arr.push.apply(arr, Array.prototype.slice.call(arguments, 2));\n    };\n\n    objectPath.coalesce = function (obj, paths, defaultValue) {\n      var value;\n\n      for (var i = 0, len = paths.length; i < len; i++) {\n        if ((value = objectPath.get(obj, paths[i])) !== void 0) {\n          return value;\n        }\n      }\n\n      return defaultValue;\n    };\n\n    objectPath.get = function (obj, path, defaultValue){\n      if (typeof path === 'number') {\n        path = [path];\n      }\n      if (!path || path.length === 0) {\n        return obj;\n      }\n      if (obj == null) {\n        return defaultValue;\n      }\n      if (typeof path === 'string') {\n        return objectPath.get(obj, path.split('.'), defaultValue);\n      }\n\n      var currentPath = getKey(path[0]);\n      var nextObj = getShallowProperty(obj, currentPath)\n      if (nextObj === void 0) {\n        return defaultValue;\n      }\n\n      if (path.length === 1) {\n        return nextObj;\n      }\n\n      return objectPath.get(obj[currentPath], path.slice(1), defaultValue);\n    };\n\n    objectPath.del = function del(obj, path) {\n      if (typeof path === 'number') {\n        path = [path];\n      }\n\n      if (obj == null) {\n        return obj;\n      }\n\n      if (isEmpty(path)) {\n        return obj;\n      }\n      if(typeof path === 'string') {\n        return objectPath.del(obj, path.split('.'));\n      }\n\n      var currentPath = getKey(path[0]);\n      if (!hasShallowProperty(obj, currentPath)) {\n        return obj;\n      }\n\n      if(path.length === 1) {\n        if (isArray(obj)) {\n          obj.splice(currentPath, 1);\n        } else {\n          delete obj[currentPath];\n        }\n      } else {\n        return objectPath.del(obj[currentPath], path.slice(1));\n      }\n\n      return obj;\n    }\n\n    return objectPath;\n  }\n\n  var mod = factory();\n  mod.create = factory;\n  mod.withInheritedProps = factory({includeInheritedProps: true})\n  return mod;\n});\n","import Vec, {Vector} from './lib/Vec';\nimport Subject from \"./Subject\";\nimport Arrow from \"./Arrow\";\n\n/**\n * Construct an input event type for the purposes of the observer pattern\n */\n\ninterface InputEvent {\n    inputArrow?: Arrow;\n    newProjectile?: Arrow;\n    cameraUpdate?: Vector;\n}\n\nclass Input extends Subject<InputEvent> {\n    drawInput: Function;\n    camera: any;\n    canvas: HTMLCanvasElement;\n    cx: CanvasRenderingContext2D;\n    getInputLine: Function;\n\n    constructor(canvas: HTMLCanvasElement) {\n        super();\n        this.drawInput = () => {};\n        this.getInputLine = () => {};\n        this.canvas = canvas;\n        this.cx = canvas.getContext('2d');\n        this.camera = {\n            delta: Vec(0, 0),\n            position: Vec(0, 0)\n        }\n        canvas.addEventListener(\"mousedown\", this.handleMouseDown.bind(this));\n    }\n\n    handleMouseDown(event: MouseEvent) {\n        if (event.shiftKey) {\n            this.beginViewDrag(Vec(event.offsetX, event.offsetY));\n        } else {\n            this.beginVectorDraw(Vec(event.offsetX, event.offsetY));\n        }\n    }\n\n    beginViewDrag(startVec: any) {\n        let canvas: HTMLCanvasElement = this.canvas;\n        let camera = this.camera;\n        \n        let moveHandle = event => {\n            this.camera.delta = Vec(event.offsetX, event.offsetY).minus(startVec);\n            this.emit({cameraUpdate: this.camera.position.plus(this.camera.delta)});\n        }\n        canvas.addEventListener('mousemove', moveHandle);\n    \n        let upHandle = event => {\n            camera.position = camera.delta.plus(camera.position);\n            camera.delta = Vec();\n            canvas.removeEventListener('mousemove', moveHandle);\n            canvas.removeEventListener('mouseup', upHandle);\n        }\n        canvas.addEventListener('mouseup', upHandle);\n    }\n\n    beginVectorDraw(startVec) {\n        let canvas: HTMLCanvasElement = this.canvas;\n        startVec = startVec.minus(this.camera.position); // Correct for camera placement\n\n        let moveHandle = event => {\n            let end = Vec(event.offsetX, event.offsetY)\n            end = end.minus(this.camera.position);\n\n            this.emit({\n                inputArrow: {\n                    start: startVec, delta: end.minus(startVec)\n                }\n            })\n        }\n        canvas.addEventListener('mousemove', moveHandle);\n\n        let upHandle = event => {\n            let end = Vec(event.offsetX, event.offsetY)\n            end = end.minus(this.camera.position);\n            this.drawInput = () => {};\n            this.getInputLine = () => {};\n            let delta = end.minus(startVec);\n\n            this.emit({\n                newProjectile: {\n                    start: startVec,\n                    delta\n                }\n            })\n\n            canvas.removeEventListener('mousemove', moveHandle);\n            canvas.removeEventListener('mouseup', upHandle);\n        }\n        canvas.addEventListener('mouseup', upHandle);\n    }\n}\n\nexport default Input;\nexport {\n    InputEvent\n}","import Vec, { Vector } from './lib/Vec';\nimport Projectile from './worker/Projectile';\nimport * as interpolate from 'color-interpolate';\nimport PathHistory from \"./Paths\";\nimport Arrow from \"./Arrow\";\n\ninterface RenderingRules {\n    forceVectors: boolean;\n    velocityVectors: boolean;\n    paths: boolean;\n    cameraOrigin: Vector;\n}\n\ninterface ItemsToRender {\n    projectiles: Array<Projectile>;\n    particleHistory?: PathHistory;\n    inputArrow?: Arrow;\n}\n\nclass Renderer {\n    canvas: HTMLCanvasElement;\n    cx: CanvasRenderingContext2D;\n    rules: RenderingRules;\n    constructor(canvas: HTMLCanvasElement) {\n        this.canvas = canvas;\n        this.cx = this.canvas.getContext('2d');\n        this.rules = {\n            forceVectors: false,\n            velocityVectors: false,\n            paths: false,\n            cameraOrigin: Vec(0,0)\n        }\n    }\n\n    setRules(rules: RenderingRules) {\n        this.rules = rules;\n    }\n\n    render(itemsToRender : ItemsToRender) {\n        let cx = this.cx;\n\n        cx.clearRect(0,0,this.canvas.width,this.canvas.height);\n        cx.save();\n\n        if (!this.rules.cameraOrigin.equals(Vec(0,0))) {\n            // TODO: Update camera position\n            let {x, y} = this.rules.cameraOrigin;\n            cx.translate(x, y);\n        }\n\n        if (this.rules.paths) {\n            // TODO: Add logic for particle path rendering\n        }\n\n        if (itemsToRender.inputArrow) {\n            let { start, delta } = itemsToRender.inputArrow;\n            let end = start.plus(delta);\n\n            cx.save();\n            cx.strokeStyle = 'blue';\n            cx.beginPath();\n            cx.moveTo(start.x, start.y);\n            cx.lineTo(end.x, end.y);\n            cx.stroke();\n            cx.restore();\n        }\n\n        const renderProjectile = projectile => {\n            drawProjectile(this.cx, projectile, this.rules);\n        }\n\n        itemsToRender.projectiles.forEach(renderProjectile);\n\n        cx.restore();\n    }\n\n}\n\nconst drawPathHistory = (cx, path, mass) => {\n    cx.fillStyle = cx.strokeStyle = colorMap(Math.log10(Math.max(mass, 1))/4);\n\n    cx.beginPath();\n    path.forEach(({x, y}) => {\n        cx.lineTo(x,y);\n    });\n    cx.stroke();\n}\n\nconst drawProjectile = (cx: CanvasRenderingContext2D, proj: Projectile, options?: RenderingRules) => {\n    cx.fillStyle = cx.strokeStyle = computeProjectileColor(proj);\n\n    cx.beginPath();\n    cx.arc(proj.position.x, proj.position.y,\n         (proj._radius || Projectile.prototype.computeRadius.apply(proj)), 0, 2*Math.PI);\n    cx.fill();\n\n    let pos = Object.assign(Vec(), proj.position);\n    let vel = Object.assign(Vec(), proj.velocity);\n    let accel = Object.assign(Vec(), proj.acceleration);\n    if (options.velocityVectors) {\n        drawArrow(cx, pos, pos.plus(vel));\n    }\n    if (options.forceVectors) {\n        drawArrow(cx, pos, pos.plus(accel));\n    }\n}\n\nconst drawInput = (cx, arrow: Arrow) => {\n    let start = arrow.start;\n    let end = arrow.start.plus(arrow.delta);\n    cx.strokeStyle = 'blue';\n    cx.beginPath();\n    cx.moveTo(start.x, start.y);\n    cx.lineTo(end.x, end.y);\n    cx.stroke();\n}\n\n\nlet colorMap = interpolate(['white', 'brown', 'orange', 'red']);\nfunction computeProjectileColor(proj: Projectile) {\n    return colorMap(Math.log10(Math.max(proj.mass, 1))/4);\n}\n\n\nlet drawArrow = (cx: CanvasRenderingContext2D, s: Vector, e: Vector) => {\n    cx.beginPath();\n    cx.moveTo(s.x, s.y);\n    cx.lineTo(e.x, e.y);\n    cx.stroke();\n    cx.beginPath();\n    cx.moveTo(e.x, e.y);\n    let {x, y} = e.minus(s).normalize().times(7).rotate(5/6*Math.PI).plus(e);\n    cx.lineTo(x,y);\n    ({x, y} = e.minus(s).normalize().times(7).rotate(-5/6*Math.PI).plus(e));\n    cx.lineTo(x,y);\n    cx.closePath();\n    cx.fill();\n}\n\nexport default Renderer;\nexport {\n    ItemsToRender,\n    RenderingRules\n}\n\n/*\nfunction render(canvas: HTMLCanvasElement, itemsToRender, rules) {\n    if (!cx) cx = canvas.getContext('2d');\n    cx.clearRect(0, 0, canvas.width, canvas.height);\n    cx.save();\n\n    if (rules.transform) {\n        let {x, y} = rules.transform;\n        cx.translate(x, y);\n    }\n\n    if (<Map<number, {number, Array }> >itemsToRender.history) {\n        if (rules.paths) {\n            let history = itemsToRender.history;\n            for (let proj of history) {\n                proj = proj[1];\n                drawPathHistory(cx, proj.position, proj.mass);\n            }\n        }\n    }\n\n    let state = itemsToRender.projectiles;\n    (state || console.log(`state is being weird: ${JSON.stringify(state)}`)) && state.forEach(proj => {\n        cx.save();\n        drawProjectile(cx, proj, rules);\n        cx.restore();\n    })\n\n    if (itemsToRender.inputLine) {\n        let inputLine = itemsToRender.inputLine;\n        cx.save();\n        drawInput(cx, inputLine);\n        cx.restore();\n    }\n\n    cx.restore();\n}\n\n */\n\n","/**\r\n * @module  color-interpolate\r\n * Pick color from palette by index\r\n */\r\n\r\nconst parse = require('color-parse');\r\nconst hsl = require('color-space/hsl');\r\nconst lerp = require('lerp');\r\nconst clamp = require('mumath/clamp');\r\n\r\nmodule.exports = interpolate;\r\n\r\nfunction interpolate (palette) {\r\n\tpalette = palette.map(c => {\r\n\t\tc = parse(c);\r\n\t\tif (c.space != 'rgb') {\r\n\t\t\tif (c.space != 'hsl') throw `${c.space} space is not supported.`;\r\n\t\t\tc.values = hsl.rgb(c.values);\r\n\t\t}\r\n\t\tc.values.push(c.alpha);\r\n\t\treturn c.values;\r\n\t});\r\n\r\n\treturn (t, mix = lerp) => {\r\n\t\tt = clamp(t, 0, 1);\r\n\r\n\t\tlet idx = ( palette.length - 1 ) * t,\r\n\t\t\tlIdx = Math.floor( idx ),\r\n\t\t\trIdx = Math.ceil( idx );\r\n\r\n\t\tt = idx - lIdx;\r\n\r\n\t\tlet lColor = palette[lIdx], rColor = palette[rIdx];\r\n\r\n\t\tlet result = lColor.map((v, i) => {\r\n\t\t\tv = mix(v, rColor[i], t);\r\n\t\t\tif (i < 3) v = Math.round(v);\r\n\t\t\treturn v;\r\n\t\t});\r\n\r\n\t\tif (result[3] === 1) {\r\n\t\t\treturn `rgb(${result.slice(0,3)})`;\r\n\t\t}\r\n\t\treturn `rgba(${result})`;\r\n\t};\r\n}\r\n","/**\r\n * @module color-parse\r\n */\r\n\r\n'use strict'\r\n\r\nvar names = require('color-name')\r\nvar isObject = require('is-plain-obj')\r\nvar defined = require('defined')\r\n\r\nmodule.exports = parse\r\n\r\n/**\r\n * Base hues\r\n * http://dev.w3.org/csswg/css-color/#typedef-named-hue\r\n */\r\n//FIXME: use external hue detector\r\nvar baseHues = {\r\n\tred: 0,\r\n\torange: 60,\r\n\tyellow: 120,\r\n\tgreen: 180,\r\n\tblue: 240,\r\n\tpurple: 300\r\n}\r\n\r\n/**\r\n * Parse color from the string passed\r\n *\r\n * @return {Object} A space indicator `space`, an array `values` and `alpha`\r\n */\r\nfunction parse (cstr) {\r\n\tvar m, parts = [], alpha = 1, space\r\n\r\n\tif (typeof cstr === 'string') {\r\n\t\t//keyword\r\n\t\tif (names[cstr]) {\r\n\t\t\tparts = names[cstr].slice()\r\n\t\t\tspace = 'rgb'\r\n\t\t}\r\n\r\n\t\t//reserved words\r\n\t\telse if (cstr === 'transparent') {\r\n\t\t\talpha = 0\r\n\t\t\tspace = 'rgb'\r\n\t\t\tparts = [0,0,0]\r\n\t\t}\r\n\r\n\t\t//hex\r\n\t\telse if (/^#[A-Fa-f0-9]+$/.test(cstr)) {\r\n\t\t\tvar base = cstr.slice(1)\r\n\t\t\tvar size = base.length\r\n\t\t\tvar isShort = size <= 4\r\n\t\t\talpha = 1\r\n\r\n\t\t\tif (isShort) {\r\n\t\t\t\tparts = [\r\n\t\t\t\t\tparseInt(base[0] + base[0], 16),\r\n\t\t\t\t\tparseInt(base[1] + base[1], 16),\r\n\t\t\t\t\tparseInt(base[2] + base[2], 16)\r\n\t\t\t\t]\r\n\t\t\t\tif (size === 4) {\r\n\t\t\t\t\talpha = parseInt(base[3] + base[3], 16) / 255\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tparts = [\r\n\t\t\t\t\tparseInt(base[0] + base[1], 16),\r\n\t\t\t\t\tparseInt(base[2] + base[3], 16),\r\n\t\t\t\t\tparseInt(base[4] + base[5], 16)\r\n\t\t\t\t]\r\n\t\t\t\tif (size === 8) {\r\n\t\t\t\t\talpha = parseInt(base[6] + base[7], 16) / 255\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!parts[0]) parts[0] = 0\r\n\t\t\tif (!parts[1]) parts[1] = 0\r\n\t\t\tif (!parts[2]) parts[2] = 0\r\n\r\n\t\t\tspace = 'rgb'\r\n\t\t}\r\n\r\n\t\t//color space\r\n\t\telse if (m = /^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\\s*\\(([^\\)]*)\\)/.exec(cstr)) {\r\n\t\t\tvar name = m[1]\r\n\t\t\tvar base = name.replace(/a$/, '')\r\n\t\t\tspace = base\r\n\t\t\tvar size = base === 'cmyk' ? 4 : base === 'gray' ? 1 : 3\r\n\t\t\tparts = m[2].trim()\r\n\t\t\t\t.split(/\\s*,\\s*/)\r\n\t\t\t\t.map(function (x, i) {\r\n\t\t\t\t\t//<percentage>\r\n\t\t\t\t\tif (/%$/.test(x)) {\r\n\t\t\t\t\t\t//alpha\r\n\t\t\t\t\t\tif (i === size)\treturn parseFloat(x) / 100\r\n\t\t\t\t\t\t//rgb\r\n\t\t\t\t\t\tif (base === 'rgb') return parseFloat(x) * 255 / 100\r\n\t\t\t\t\t\treturn parseFloat(x)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//hue\r\n\t\t\t\t\telse if (base[i] === 'h') {\r\n\t\t\t\t\t\t//<deg>\r\n\t\t\t\t\t\tif (/deg$/.test(x)) {\r\n\t\t\t\t\t\t\treturn parseFloat(x)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//<base-hue>\r\n\t\t\t\t\t\telse if (baseHues[x] !== undefined) {\r\n\t\t\t\t\t\t\treturn baseHues[x]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn parseFloat(x)\r\n\t\t\t\t})\r\n\r\n\t\t\tif (name === base) parts.push(1)\r\n\t\t\talpha = parts[size] === undefined ? 1 : parts[size]\r\n\t\t\tparts = parts.slice(0, size)\r\n\t\t}\r\n\r\n\t\t//named channels case\r\n\t\telse if (cstr.length > 10 && /[0-9](?:\\s|\\/)/.test(cstr)) {\r\n\t\t\tparts = cstr.match(/([0-9]+)/g).map(function (value) {\r\n\t\t\t\treturn parseFloat(value)\r\n\t\t\t})\r\n\r\n\t\t\tspace = cstr.match(/([a-z])/ig).join('').toLowerCase()\r\n\t\t}\r\n\t}\r\n\r\n\t//numeric case\r\n\telse if (!isNaN(cstr)) {\r\n\t\tspace = 'rgb'\r\n\t\tparts = [cstr >>> 16, (cstr & 0x00ff00) >>> 8, cstr & 0x0000ff]\r\n\t}\r\n\r\n\t//object case - detects css cases of rgb and hsl\r\n\telse if (isObject(cstr)) {\r\n\t\tvar r = defined(cstr.r, cstr.red, cstr.R, null)\r\n\r\n\t\tif (r !== null) {\r\n\t\t\tspace = 'rgb'\r\n\t\t\tparts = [\r\n\t\t\t\tr,\r\n\t\t\t\tdefined(cstr.g, cstr.green, cstr.G),\r\n\t\t\t\tdefined(cstr.b, cstr.blue, cstr.B)\r\n\t\t\t]\r\n\t\t}\r\n\t\telse {\r\n\t\t\tspace = 'hsl'\r\n\t\t\tparts = [\r\n\t\t\t\tdefined(cstr.h, cstr.hue, cstr.H),\r\n\t\t\t\tdefined(cstr.s, cstr.saturation, cstr.S),\r\n\t\t\t\tdefined(cstr.l, cstr.lightness, cstr.L, cstr.b, cstr.brightness)\r\n\t\t\t]\r\n\t\t}\r\n\r\n\t\talpha = defined(cstr.a, cstr.alpha, cstr.opacity, 1)\r\n\r\n\t\tif (cstr.opacity != null) alpha /= 100\r\n\t}\r\n\r\n\t//array\r\n\telse if (Array.isArray(cstr) || global.ArrayBuffer && ArrayBuffer.isView && ArrayBuffer.isView(cstr)) {\r\n\t\tparts = [cstr[0], cstr[1], cstr[2]]\r\n\t\tspace = 'rgb'\r\n\t\talpha = cstr.length === 4 ? cstr[3] : 1\r\n\t}\r\n\r\n\treturn {\r\n\t\tspace: space,\r\n\t\tvalues: parts,\r\n\t\talpha: alpha\r\n\t}\r\n}\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","'use strict';\nvar toString = Object.prototype.toString;\n\nmodule.exports = function (x) {\n\tvar prototype;\n\treturn toString.call(x) === '[object Object]' && (prototype = Object.getPrototypeOf(x), prototype === null || prototype === Object.getPrototypeOf({}));\n};\n","module.exports = function () {\n    for (var i = 0; i < arguments.length; i++) {\n        if (arguments[i] !== undefined) return arguments[i];\n    }\n};\n","/**\n * @module color-space/hsl\n */\n'use strict'\n\nvar rgb = require('./rgb');\n\nmodule.exports = {\n\tname: 'hsl',\n\tmin: [0,0,0],\n\tmax: [360,100,100],\n\tchannel: ['hue', 'saturation', 'lightness'],\n\talias: ['HSL'],\n\n\trgb: function(hsl) {\n\t\tvar h = hsl[0] / 360,\n\t\t\t\ts = hsl[1] / 100,\n\t\t\t\tl = hsl[2] / 100,\n\t\t\t\tt1, t2, t3, rgb, val;\n\n\t\tif (s === 0) {\n\t\t\tval = l * 255;\n\t\t\treturn [val, val, val];\n\t\t}\n\n\t\tif (l < 0.5) {\n\t\t\tt2 = l * (1 + s);\n\t\t}\n\t\telse {\n\t\t\tt2 = l + s - l * s;\n\t\t}\n\t\tt1 = 2 * l - t2;\n\n\t\trgb = [0, 0, 0];\n\t\tfor (var i = 0; i < 3; i++) {\n\t\t\tt3 = h + 1 / 3 * - (i - 1);\n\t\t\tif (t3 < 0) {\n\t\t\t\tt3++;\n\t\t\t}\n\t\t\telse if (t3 > 1) {\n\t\t\t\tt3--;\n\t\t\t}\n\n\t\t\tif (6 * t3 < 1) {\n\t\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t\t}\n\t\t\telse if (2 * t3 < 1) {\n\t\t\t\tval = t2;\n\t\t\t}\n\t\t\telse if (3 * t3 < 2) {\n\t\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tval = t1;\n\t\t\t}\n\n\t\t\trgb[i] = val * 255;\n\t\t}\n\n\t\treturn rgb;\n\t}\n};\n\n\n//extend rgb\nrgb.hsl = function(rgb) {\n\tvar r = rgb[0]/255,\n\t\t\tg = rgb[1]/255,\n\t\t\tb = rgb[2]/255,\n\t\t\tmin = Math.min(r, g, b),\n\t\t\tmax = Math.max(r, g, b),\n\t\t\tdelta = max - min,\n\t\t\th, s, l;\n\n\tif (max === min) {\n\t\th = 0;\n\t}\n\telse if (r === max) {\n\t\th = (g - b) / delta;\n\t}\n\telse if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t}\n\telse if (b === max) {\n\t\th = 4 + (r - g)/ delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t}\n\telse if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t}\n\telse {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n","/**\n * RGB space.\n *\n * @module  color-space/rgb\n */\n'use strict'\n\nmodule.exports = {\n\tname: 'rgb',\n\tmin: [0,0,0],\n\tmax: [255,255,255],\n\tchannel: ['red', 'green', 'blue'],\n\talias: ['RGB']\n};\n","function lerp(v0, v1, t) {\n    return v0*(1-t)+v1*t\n}\nmodule.exports = lerp","/**\r\n * Clamp value.\r\n * Detects proper clamp min/max.\r\n *\r\n * @param {number} a Current value to cut off\r\n * @param {number} min One side limit\r\n * @param {number} max Other side limit\r\n *\r\n * @return {number} Clamped value\r\n */\r\n'use strict';\r\nmodule.exports = function(a, min, max){\r\n\treturn max > min ? Math.max(Math.min(a,max),min) : Math.max(Math.min(a,min),max);\r\n};\r\n","export default function fitToContainer(canvas){\n    // Make it visually fill the positioned parent\n    let parent = canvas.parentElement;\n\n    //canvas.style.width ='100%';\n    //canvas.style.height='100%';\n    // ...then set the internal size to match\n    canvas.width  = parent.clientWidth;\n    canvas.height = parent.clientHeight;\n}","import Subject from './Subject'\n\nclass Store<T> extends Subject<T> {\n    state: T;\n\n    constructor(defaultState: T) {\n        super();\n        this.state = defaultState;\n    }\n\n    propagate() {\n        this.emit(this.state);\n    }\n}\n\nexport default Store;","\nvar content = require(\"!!../css-loader/index.js!./normalize.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../css-loader/index.js!./normalize.css\", function() {\n\t\tvar newContent = require(\"!!../css-loader/index.js!./normalize.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*! normalize.css v8.0.0 | MIT License | github.com/necolas/normalize.css */\\n\\n/* Document\\n   ========================================================================== */\\n\\n/**\\n * 1. Correct the line height in all browsers.\\n * 2. Prevent adjustments of font size after orientation changes in iOS.\\n */\\n\\nhtml {\\n  line-height: 1.15; /* 1 */\\n  -webkit-text-size-adjust: 100%; /* 2 */\\n}\\n\\n/* Sections\\n   ========================================================================== */\\n\\n/**\\n * Remove the margin in all browsers.\\n */\\n\\nbody {\\n  margin: 0;\\n}\\n\\n/**\\n * Correct the font size and margin on `h1` elements within `section` and\\n * `article` contexts in Chrome, Firefox, and Safari.\\n */\\n\\nh1 {\\n  font-size: 2em;\\n  margin: 0.67em 0;\\n}\\n\\n/* Grouping content\\n   ========================================================================== */\\n\\n/**\\n * 1. Add the correct box sizing in Firefox.\\n * 2. Show the overflow in Edge and IE.\\n */\\n\\nhr {\\n  box-sizing: content-box; /* 1 */\\n  height: 0; /* 1 */\\n  overflow: visible; /* 2 */\\n}\\n\\n/**\\n * 1. Correct the inheritance and scaling of font size in all browsers.\\n * 2. Correct the odd `em` font sizing in all browsers.\\n */\\n\\npre {\\n  font-family: monospace, monospace; /* 1 */\\n  font-size: 1em; /* 2 */\\n}\\n\\n/* Text-level semantics\\n   ========================================================================== */\\n\\n/**\\n * Remove the gray background on active links in IE 10.\\n */\\n\\na {\\n  background-color: transparent;\\n}\\n\\n/**\\n * 1. Remove the bottom border in Chrome 57-\\n * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.\\n */\\n\\nabbr[title] {\\n  border-bottom: none; /* 1 */\\n  text-decoration: underline; /* 2 */\\n  text-decoration: underline dotted; /* 2 */\\n}\\n\\n/**\\n * Add the correct font weight in Chrome, Edge, and Safari.\\n */\\n\\nb,\\nstrong {\\n  font-weight: bolder;\\n}\\n\\n/**\\n * 1. Correct the inheritance and scaling of font size in all browsers.\\n * 2. Correct the odd `em` font sizing in all browsers.\\n */\\n\\ncode,\\nkbd,\\nsamp {\\n  font-family: monospace, monospace; /* 1 */\\n  font-size: 1em; /* 2 */\\n}\\n\\n/**\\n * Add the correct font size in all browsers.\\n */\\n\\nsmall {\\n  font-size: 80%;\\n}\\n\\n/**\\n * Prevent `sub` and `sup` elements from affecting the line height in\\n * all browsers.\\n */\\n\\nsub,\\nsup {\\n  font-size: 75%;\\n  line-height: 0;\\n  position: relative;\\n  vertical-align: baseline;\\n}\\n\\nsub {\\n  bottom: -0.25em;\\n}\\n\\nsup {\\n  top: -0.5em;\\n}\\n\\n/* Embedded content\\n   ========================================================================== */\\n\\n/**\\n * Remove the border on images inside links in IE 10.\\n */\\n\\nimg {\\n  border-style: none;\\n}\\n\\n/* Forms\\n   ========================================================================== */\\n\\n/**\\n * 1. Change the font styles in all browsers.\\n * 2. Remove the margin in Firefox and Safari.\\n */\\n\\nbutton,\\ninput,\\noptgroup,\\nselect,\\ntextarea {\\n  font-family: inherit; /* 1 */\\n  font-size: 100%; /* 1 */\\n  line-height: 1.15; /* 1 */\\n  margin: 0; /* 2 */\\n}\\n\\n/**\\n * Show the overflow in IE.\\n * 1. Show the overflow in Edge.\\n */\\n\\nbutton,\\ninput { /* 1 */\\n  overflow: visible;\\n}\\n\\n/**\\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\\n * 1. Remove the inheritance of text transform in Firefox.\\n */\\n\\nbutton,\\nselect { /* 1 */\\n  text-transform: none;\\n}\\n\\n/**\\n * Correct the inability to style clickable types in iOS and Safari.\\n */\\n\\nbutton,\\n[type=\\\"button\\\"],\\n[type=\\\"reset\\\"],\\n[type=\\\"submit\\\"] {\\n  -webkit-appearance: button;\\n}\\n\\n/**\\n * Remove the inner border and padding in Firefox.\\n */\\n\\nbutton::-moz-focus-inner,\\n[type=\\\"button\\\"]::-moz-focus-inner,\\n[type=\\\"reset\\\"]::-moz-focus-inner,\\n[type=\\\"submit\\\"]::-moz-focus-inner {\\n  border-style: none;\\n  padding: 0;\\n}\\n\\n/**\\n * Restore the focus styles unset by the previous rule.\\n */\\n\\nbutton:-moz-focusring,\\n[type=\\\"button\\\"]:-moz-focusring,\\n[type=\\\"reset\\\"]:-moz-focusring,\\n[type=\\\"submit\\\"]:-moz-focusring {\\n  outline: 1px dotted ButtonText;\\n}\\n\\n/**\\n * Correct the padding in Firefox.\\n */\\n\\nfieldset {\\n  padding: 0.35em 0.75em 0.625em;\\n}\\n\\n/**\\n * 1. Correct the text wrapping in Edge and IE.\\n * 2. Correct the color inheritance from `fieldset` elements in IE.\\n * 3. Remove the padding so developers are not caught out when they zero out\\n *    `fieldset` elements in all browsers.\\n */\\n\\nlegend {\\n  box-sizing: border-box; /* 1 */\\n  color: inherit; /* 2 */\\n  display: table; /* 1 */\\n  max-width: 100%; /* 1 */\\n  padding: 0; /* 3 */\\n  white-space: normal; /* 1 */\\n}\\n\\n/**\\n * Add the correct vertical alignment in Chrome, Firefox, and Opera.\\n */\\n\\nprogress {\\n  vertical-align: baseline;\\n}\\n\\n/**\\n * Remove the default vertical scrollbar in IE 10+.\\n */\\n\\ntextarea {\\n  overflow: auto;\\n}\\n\\n/**\\n * 1. Add the correct box sizing in IE 10.\\n * 2. Remove the padding in IE 10.\\n */\\n\\n[type=\\\"checkbox\\\"],\\n[type=\\\"radio\\\"] {\\n  box-sizing: border-box; /* 1 */\\n  padding: 0; /* 2 */\\n}\\n\\n/**\\n * Correct the cursor style of increment and decrement buttons in Chrome.\\n */\\n\\n[type=\\\"number\\\"]::-webkit-inner-spin-button,\\n[type=\\\"number\\\"]::-webkit-outer-spin-button {\\n  height: auto;\\n}\\n\\n/**\\n * 1. Correct the odd appearance in Chrome and Safari.\\n * 2. Correct the outline style in Safari.\\n */\\n\\n[type=\\\"search\\\"] {\\n  -webkit-appearance: textfield; /* 1 */\\n  outline-offset: -2px; /* 2 */\\n}\\n\\n/**\\n * Remove the inner padding in Chrome and Safari on macOS.\\n */\\n\\n[type=\\\"search\\\"]::-webkit-search-decoration {\\n  -webkit-appearance: none;\\n}\\n\\n/**\\n * 1. Correct the inability to style clickable types in iOS and Safari.\\n * 2. Change font properties to `inherit` in Safari.\\n */\\n\\n::-webkit-file-upload-button {\\n  -webkit-appearance: button; /* 1 */\\n  font: inherit; /* 2 */\\n}\\n\\n/* Interactive\\n   ========================================================================== */\\n\\n/*\\n * Add the correct display in Edge, IE 10+, and Firefox.\\n */\\n\\ndetails {\\n  display: block;\\n}\\n\\n/*\\n * Add the correct display in all browsers.\\n */\\n\\nsummary {\\n  display: list-item;\\n}\\n\\n/* Misc\\n   ========================================================================== */\\n\\n/**\\n * Add the correct display in IE 10+.\\n */\\n\\ntemplate {\\n  display: none;\\n}\\n\\n/**\\n * Add the correct display in IE 10.\\n */\\n\\n[hidden] {\\n  display: none;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","import Projectile from \"./worker/Projectile\";\nimport Arrow from \"./Arrow\";\n\nclass ProjectileFactory {\n    mass: number;\n\n    constructor(defaultMass) {\n        this.mass = defaultMass;\n    }\n\n    setMass(mass: number) {\n        this.mass = mass;\n    }\n\n    create({start, delta}: Arrow) : Projectile {\n        return new Projectile(start, delta, this.mass);\n    }\n}\n\nexport default ProjectileFactory;","import Projectile from \"./worker/Projectile\";\nimport Subject from \"./Subject\";\nimport {createMessage, Message, MessageType} from \"./worker/Message\";\n\n// wrapper for the physics simulation web worker\nclass Simulator extends Subject<Array<Projectile>> {\n    worker: Worker;\n    paused: boolean;\n\n    constructor() {\n        super();\n        this.worker = new Worker('worker.js');\n        this.worker.onmessage = this.onMessage.bind(this);\n        this.play();\n    }\n\n    onMessage({ data } :  {data: Message}) {\n        if (data.type == MessageType.PHYSICS_STEP) {\n            this.emit(data.payload as Array<Projectile>);\n        }\n    }\n\n    play() {\n        this.worker.postMessage(createMessage(MessageType.PLAY));\n        this.paused = false;\n    }\n\n    pause() {\n        this.worker.postMessage(createMessage(MessageType.PAUSE));\n        this.paused = true;\n    }\n\n    // TODO: Implement function that passes entire state to engine\n    /*\n    updateData() {\n        this.worker.postMessage(createMessage(\n\n        ))\n    }\n     */\n\n    addProjectile(projectile: Projectile) {\n        this.worker.postMessage(createMessage(\n            MessageType.NEW_PROJECTILE,\n            projectile\n            )\n        );\n    }\n\n    // TODO: Add speed control\n    /*\n    setSpeed(speed: number) {\n\n    }\n     */\n\n}\n\nexport default Simulator;"],"sourceRoot":""}